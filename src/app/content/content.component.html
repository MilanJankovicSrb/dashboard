<div class="container" [class.is-mobile]="mobileQuery.matches">
    <div class="paginator noSelect">
        <div class="sidenavControl">
            <button mat-icon-button (click)="snav.toggle();">
                <mat-icon class="arrows" 
                        svgIcon="chevron-double-left" 
                        matListIcon        
                        *ngIf="snav.opened"></mat-icon>
                <mat-icon class="arrows" 
                        svgIcon="chevron-double-right" 
                        matListIcon 
                        *ngIf="!snav.opened"></mat-icon>
                <mat-icon class="filter" 
                        svgIcon="filter-outline" 
                        matListIcon 
                        matTooltip="Chiudi sfaccettatura" 
                        *ngIf="snav.opened"></mat-icon>
                <mat-icon class="filter" 
                        svgIcon="filter-outline" 
                        matListIcon 
                        matTooltip="Apri sfaccettatura" 
                        *ngIf="!snav.opened"></mat-icon>
            </button>
            <button mat-icon-button 
                    (click)="resetAll()">
            <mat-icon class="filterReset" 
                        svgIcon="filter-outline" 
                        matListIcon 
                        matTooltip="Rimuovi filtri"></mat-icon>
            <mat-icon class="reset" 
                        svgIcon="close" 
                        matListIcon></mat-icon>
            </button>
        </div>
        <div class="sortAndOrder">
            <button mat-icon-button class="sortButton" (click)="ascending = !ascending; loadList(pageSize, pageIndex);">
                <mat-icon svgIcon="arrow-collapse-up" 
                    *ngIf="!ascending"
                    matTooltip="Ascendente" 
                    class="sortIcon"></mat-icon>
                <mat-icon svgIcon="arrow-collapse-down" 
                    *ngIf="ascending"
                    matTooltip="Discendente" 
                    class="sortIcon"></mat-icon>
            </button>
            <span class="orderText">Order by:</span>
            <mat-form-field class="orderBy" floatLabel="never">
                <mat-select [formControl]="orderBy" panelClass="orderByPanel">
                    <mat-option [value]="1">1</mat-option>
                    <mat-option [value]="2">2</mat-option>
                    <mat-option [value]="3">3</mat-option>
                </mat-select>
            </mat-form-field>
        </div>
        <div class="spacer"></div>
        <mat-paginator [length]="length"
                       [pageSize]="pageSize"
                       [pageIndex]="pageIndex"
                       [pageSizeOptions]="pageSizeOptions"
                       [showFirstLastButtons]="true"
                       (page)="onPageChanged($event);">
        </mat-paginator>
    </div>
    <mat-sidenav-container class="sidenav-container"
                            [style.marginTop.px]="mobileQuery.matches ? 0 : 0">
        <mat-sidenav #snav class="facetsSidenav" [mode]="mobileQuery.matches ? 'over' : 'side'"
                    [fixedInViewport]="mobileQuery.matches" fixedTopGap="104" [opened]="mobileQuery.matches ? 'false' : 'true'">
                <mat-expansion-panel [expanded]="i &lt; 1" hideToggle *ngFor="let category of facetCategories; let i = index">
                    <mat-expansion-panel-header class="noSelect">
                        <mat-panel-title>
                        {{category.descr}}
                        </mat-panel-title>
                        <mat-panel-description>
                            <div class="spacer"></div>
                            <mat-icon *ngIf="category.icon !== 'sitemap'">{{category.icon}}</mat-icon>
                            <mat-icon svgIcon="{{category.icon}}" 
                                      matListIcon
                                      *ngIf="category.icon === 'sitemap'"></mat-icon>
                        </mat-panel-description>
                    </mat-expansion-panel-header>
                    <mat-nav-list class="noSelect">
                        <a mat-list-item routerLink="." (click)="selectFacet(category.code, entry.code)" *ngFor="let entry of facetOptions[category.code]" [ngClass]="{'selected': isSelected(category.code, entry.code)}">
                            <span>{{entry.descr}}</span>
                            <div class="spacer"></div>
                            <span>({{entry.count}})</span>
                        </a>
                    </mat-nav-list>
                </mat-expansion-panel>
        </mat-sidenav>
        <mat-sidenav-content class="contentContainer">
            <cdk-virtual-scroll-viewport itemSize="100" class="viewport">
                <div *cdkVirtualFor="let item of activePageDataChunk; templateCacheSize: 0"
                     class="listItem"
                     cdkVirtualForTrackBy="trackByFn()">
                     <div class="employee">
                        <mat-icon class="listIcon">person_outlined</mat-icon><span class="workerId">{{item.lavMatricola}} - {{item.lavCognome}} {{item.lavNome}}</span><br>
                        <mat-icon class="cdcInfo" svgIcon="sitemap"></mat-icon><span class="cdcId"><span class="descr">Cost centre ID:</span> {{item.codCdc}}</span><br>
                        <mat-icon class="listIcon">business</mat-icon><span class="companyId"><span class="descr">Company ID:</span> {{item.socDescbreve}}</span>
                     </div>
                     <div class="costCentre">
                         <span class="cdcDescription"><span class="descr">Cost centre:</span> {{item.cdcDescrizione}}</span><br>
                         <span class="cdcResp"><span class="descr">Responsible:</span> {{item.cdcResponsabile}} - {{item.cdcRespCognome}} {{item.cdcRespNome}}</span><br>
                         <span class="cdcSegment" *ngIf="item.cdcConsolidationSegment"><span class="descr">Segment:</span> {{item.cdcConsolidationSegment}}</span><br>
                         <span class="absoluteNote" *ngIf="item.nota">Note: {{item.nota}}</span>
                     </div>
                     <div class="spacer"></div>
                     <div class="date">
                         <span class="dateTitle"><mat-icon class="listIcon">date_range</mat-icon><span class="dateDescr">Date:</span></span><br>
                         <span class="yearMonthDay">{{item.rapGiorno}}/{{item.rapMese}}/{{item.rapAnno}} ({{item.speProgressivo}})</span><br>
                     </div>
                     <div class="secondSign">
                        <span class="secondSignTitle"><mat-icon class="listIcon">done_all</mat-icon><span class="descr">Second sign:</span></span><br>
                        <span class="secondSignId">{{item.f2Matricola}} - {{item.f2Cognome}} {{item.f2Nome}}</span>
                     </div>
                     <div class="amountDiv">
                        <span class="amount"><span class="descrAmount">Amount:</span> {{item.varieImporto | currency:'EUR':'':'1.2-2':'it' }}</span><br>
                        <span class="currency" *ngIf="item.divCodice"><span class="descrAmount">Currency:</span> {{item.divCodice}}</span><br>
                        <span class="importoValuta" *ngIf="item.importoValuta"><span class="descrAmount">In EUR:</span> {{item.importoValuta | currency:'EUR':'symbol':'1.2-2':'it'}}</span>
                     </div>
                </div>
            </cdk-virtual-scroll-viewport>
        </mat-sidenav-content>
    </mat-sidenav-container>
</div>